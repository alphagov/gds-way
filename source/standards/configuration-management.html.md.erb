---
title: Use configuration management
last_reviewed_on: 2025-02-10
review_in: 24 months
---

# <%= current_page.data.title %>

Use [configuration management][] to manage, automate and standardise your infrastructure. When using configuration
management you store your [infrastructure as code][] in a version control system such as Git.

## Avoided technologies

### Puppet

The use of [Puppet][] at GDS is diminishing as we move more of our infrastructure to containers and higher level
services. It is mainly still in use on [GOV.UK](https://github.com/alphagov/govuk-puppet) but this will decline as more
services are moved over to AWS EKS.

If your environment consists of a simple deployment artefact like an [Amazon Machine Image (AMI)][], Puppet may not be
necessary, but the process for building that artefact must still be codified and version controlled.

### Terraform

HashiCorp recently - August 2023 - has changed the license for [Terraform] to the Business Source License (BSL), meaning
any version of [Terraform] after 1.5.7 will be under the new license.
[Read more here](https://www.hashicorp.com/blog/hashicorp-adopts-business-source-license)

This change does not impact our use of [Terraform] in the public sector, it does give us an opportunity to attune and
align with the Free and Open Source communities.

Whilst no project is expected to migrate away from [Terraform], starting a new project should default to a different
tool, described further down in this document.

---

## OpenTofu

Use [OpenTofu] to configure third party cloud infrastructure and services like Amazon Web Services (AWS), GitHub,
Grafana, Dynatrace or [Fastly].

### Versioning

Due to the high rate of change in many cloud provider offerings we
recommend you keep your OpenTofu versions and codebases up to date. A
version manager such as [tfenv](https://github.com/tfutils/tfenv),
already used by a number of GDS teams, can help you with supporting
multiple versions.

### State Encryption

OpenTofu supports [State and Plan Encryption](https://opentofu.org/docs/language/state/encryption/) at rest.

Provided that the state files often include sensitive or secret data, it would be

### Code analysis

There are a number of OpenTofu focused static analysis tools in use at
GDS. While none of them are yet ubiquitous they can help ensure your
code is more idiomatic, consistent and secure and you should consider the
benefits they could bring to your build pipelines.

 * [checkov](https://github.com/bridgecrewio/checkov) - "detects security and compliance misconfigurations"

 * [tfsec](https://github.com/aquasecurity/tfsec) - "spots potential security issues"

 * [tflint](https://github.com/terraform-linters/tflint) - "linter focused on possible errors, best practices and so on."

 * [tofu test](https://opentofu.org/docs/cli/commands/test/) - "performs tests written for OpenTofu IaC"

## CloudFormation and CDK

Amazon Web Services provide two tools in the field of IaC. [CloudFormation] being more traditional YAML manifests or
[CDK] being more of an SDK library for developers to program their way into configuration.

Both are limited to only cover AWS infrastrcuture, and woould not be much use outside of that echosystem - for instance,
configuring GitHub or Dynatrace would require you to invest in additional tooling such as [OpenTofu].

## Further reading

Find out more about configuration management in the [Service Manual][].

[configuration management]: https://www.digitalocean.com/community/tutorials/an-introduction-to-configuration-management
[infrastructure as code]: https://www.gov.uk/service-manual/technology/manage-your-software-configuration#use-infrastructure-as-code
[Amazon Elastic Compute Cloud (Amazon EC2)]: https://aws.amazon.com/ec2/
[Amazon Machine Image (AMI)]: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html
[Terraform]: https://www.terraform.io/
[Puppet]: https://puppet.com/
[Service Manual]: https://www.gov.uk/service-manual/technology/manage-your-software-configuration#using-configuration-management-tools
[Fastly]: https://www.fastly.com/
[govuk-aws]: https://github.com/alphagov/govuk-aws
[large number of providers]: https://www.terraform.io/docs/language/providers/index.html
[OpenTofu]: https://opentofu.org/
[CloudFormation]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html
[CDK]: https://docs.aws.amazon.com/cdk/v2/guide/home.html
